<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>瞬时报告</title>
</head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<link rel="stylesheet" href="/resources/website/css/share.css"/>
<link rel="stylesheet" href="/resources/website/css/style.css"/>
<body>
<div class="share_chartBox2">
    <p class="share_chartP">
        <span class="share_chartTitle">甲醛</span>
        <span class="share_chartDate">${ month }月<br/><span class="fS18">${ year }</span></span>
    </p>

    <div class="share_chart2">
        <div style="overflow:hidden;">
            <div id="div2" style="position: absolute;" class="figurebox2"></div>
            <div style="overflow: hidden;margin-left:10px">
                <div id="div1" class="figurebox2" style="overflow:hidden;margin-left:0px">
                    <div class="maskPrompt">
                        <!-- 周一<br/>12 -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    
    <!--文字-->
    <p class="share_P2">&nbsp;&nbsp;&nbsp;依据GB/T18883－2002《室内空气质量标准》，采用</p>
    <a class="share_P2">&nbsp;&nbsp;&nbsp;&nbsp;国家标准试剂法，该居室内环境温度为25°，环境湿度为</a>
    <a class="share_P2">&nbsp;&nbsp;&nbsp;&nbsp;50%。</a>
    <p class="share_title2">&nbsp;甲醛的来源:</p>
    <p class="share_P3">&nbsp;1、胶合板、细木工板、中密度纤维板和刨花板等人造板材及其</p>
    <a class="share_P3">&nbsp;家具制品；</a>
    <p class="share_P3">&nbsp;2、地板、墙纸等大量使用胶粘剂的室内装饰物；</p>
    <p class="share_P3">&nbsp;3、部分油漆、涂料、胶粘剂中也含有甲醛。</p>
    <p class="share_title2">&nbsp;甲醛的危害：</p>
    <p class="share_P3">&nbsp;1、 刺激作用：甲醛对眼睛和呼吸系统有强烈刺激，常见症状有</p>
    <a class="share_P3">&nbsp;流泪、咳嗽、打喷嚏、咽喉炎、结膜炎、支气管痉挛等。</a>
    <p class="share_P3">&nbsp;2、致癌作用：世界卫生组织（WHO）认定甲醛为致癌物质。</p>
    <p class="share_aBox"><a class="share_a" href="javascript:0">&nbsp;>> 推荐给好友</a></p>
    
    
<div class="share_containerBtm">
    <p class="share_P4"><span class="share_point"></span><a
            href="https://item.taobao.com/item.htm?spm=a230r.1.14.1.cji1cD&id=45023603127&ns=1&abbucket=14#detail"><span
            class="share_sp colorO">淘宝官方店铺</span></a></p>

    <p class="share_P4"><span class="share_point"></span><a
            href="http://item.yhd.com/item/51802254?tc=3.1.5.51802254.1&tp=51.%E9%9D%92%E6%A0%B8%E6%A1%83%E7%94%B2%E9%86%9B.124.1.1.KybFZZ^-10-CpjKc"><span
            class="share_sp colorO">官方1号店店铺</span></a></p>
</div>
<!--下载-->
<div class="share_download">
    <a href="http://www.qhetao.com/"><img class="share_downloadLogo" src="/resources/website/img/logo.png" alt=""/></a>
    <a class="share_downloadBtn" style="display:block;" href="${apk_download}">下载APP</a>
</div>
</body>
<script type="text/javascript" src="/resources/website/js/svg-graphic.js"></script>
<!-- <script src="iscroll.js"></script> -->
<script>
    /* var data = '[[{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.15"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.09"},{"x":"2015-08-28 13:58:49","y":"0.08"},{"x":"2015-08-28 13:58:49","y":"0.08"},{"x":"2015-08-28 13:58:49","y":"0.08"},{"x":"2015-08-28 13:58:49","y":"0.27"}],[{"x":"2015-08-28 13:58:49","y":"0.7"},{"x":"2015-08-28 13:58:49","y":"26.5"},{"x":"2015-08-28 13:58:49","y":"26.8"},{"x":"2015-08-28 13:58:49","y":"26.2"},{"x":"2015-08-28 13:58:49","y":"26.1"},{"x":"2015-08-28 13:58:49","y":"26.5"}],[{"x":"2015-08-28 13:58:49","y":"33.0"},{"x":"2015-08-28 13:58:49","y":"33.0"},{"x":"2015-08-28 13:58:49","y":"33.0"},{"x":"2015-08-28 13:58:49","y":"33.0"},{"x":"2015-08-28 13:58:49","y":"33.0"},{"x":"2015-08-28 13:58:49","y":"33.0"}]]'; */
    (function (doc, win) {
        var docEl = doc.documentElement,
                resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
                recalc = function () {
                    var clientWidth = docEl.clientWidth;
                    if (!clientWidth) return;
                    docEl.style.fontSize = 20 * (clientWidth / 640) + 'px';
                };

        if (!doc.addEventListener) return;
        win.addEventListener(resizeEvt, recalc, false);
        doc.addEventListener('DOMContentLoaded', recalc, false);
    })(document, window);

    window.onload = function () {
   	    var data = '${data}';
        //        这里是你传的数据
        var bigData = eval(data);
        var dataBaseArr = 0, dataTemArr = 0, dataHumArr = 0;
        //        主要fun
        function getData(bigData) {
            var dataArr = 0, temperatureArr = 0, humidityArr = 0, biggestDataArr = [], biggestData = 0;
            dataArr = bigData[0];
            temperatureArr = bigData[1];
            humidityArr = bigData[2];
            for (var i = 0; i < dataArr.length; i++) {
                biggestDataArr.push(dataArr[i]['y']);
            }
            biggestData = bubbling(biggestDataArr);
            dataBaseArr = dataArr;
            dataTemArr = changeY(temperatureArr, biggestData);
            dataHumArr = changeY(humidityArr, biggestData);
        }

        //        选出最大值
        function bubbling(dataArr) {
            var biggest = dataArr[0];
            for (var i = 0; i < dataArr.length; i++) {
                if (biggest < dataArr[i]) {
                    biggest = dataArr[i];
                }
            }
            return biggest;
        }

        //        转换y值，以百分比形式
        function changeY(dataArr, biggestData) {
            for (var i = 0; i < dataArr.length; i++) {
                dataArr[i]['y'] = (biggestData / 100 * dataArr[i]['y']).toFixed(3);
            }
            return dataArr;
        }

        getData(bigData);

        var oDiv1 = document.getElementById("div1");
        var oDiv2 = document.getElementById("div2");
        oDiv1.style.width = parseInt(bigData[0].length * 40) + "px";
        oDiv1.addEventListener('touchstart', function () {
            touchDownX = event.targetTouches[0].pageX;
        });
        oDiv1.setAttribute("ClipToBounds", "True")
        //滑动效果
        oDiv1.addEventListener('touchmove', function () {
            var touchMoveX = event.targetTouches[0].pageX;
            if (parseInt(touchMoveX - touchDownX) <= 0) {
                this.style.marginLeft = parseInt(this.style.marginLeft.split("px")[0]) - 10 + "px";
            } else {
                this.style.marginLeft = parseInt(this.style.marginLeft.split("px")[0]) + 10 + "px";
            }
            touchDownX = touchMoveX;
            console.log(this.style.left.split("px")[0])
        });
        oDiv1.addEventListener('touchend', function () {
            if (parseInt(this.style.marginLeft.split("px")[0]) > 0 || bigData[0].length * 40 < window.screen.availWidth) {
                this.style.marginLeft = "0px";
            }
            if (bigData[0].length * 40 - window.screen.availWidth >= 0 && parseInt(this.style.marginLeft.split("px")[0]) < -1 * (bigData[0].length * 40 - window.screen.availWidth)) {
                this.style.marginLeft = -1 * (bigData[0].length * 40 - oDiv2.offsetWidth + 40) + "px";
            }
        })
        var d1 = new CreatLine();
        //d1.createY(oDiv2)
        d1.init(oDiv1, {
            type: "",
            data: dataBaseArr,
            //            data1表示温度
            data1: dataTemArr,
            //            data2表示湿度
            data2: dataHumArr

        });
        function creatTage(tageName, json) {//创建标签方法
            var oTage = document.createElementNS(svgNs, tageName);
            for (var attr in json) {
                oTage.setAttribute(attr, json[attr]);
            }
            return oTage;
        }
    }

</script>
</html>